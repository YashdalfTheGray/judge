<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta
      name="theme-color"
      content="#ffffff"
      media="(prefers-color-scheme: light)"
    />
    <meta
      name="theme-color"
      content="#121212"
      media="(prefers-color-scheme: dark)"
    />
    <title>ðŸ¦»ðŸ«–</title>

    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3EðŸ•’%3C/text%3E%3C/svg%3E"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,600&family=Noto+Sans+Mono:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }

      body {
        font-family: 'Noto Sans', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
      }

      main {
        display: flex;
        flex-direction: column;
        gap: 2em;
      }

      output#timer {
        text-align: center;
        font-size: clamp(2rem, 8vw, 8rem);
        font-family: ui-monospace, monospace;
      }

      button {
        font-size: clamp(2rem, 8vw, 6rem);
        padding: 0.5em 1em;
        border: none;
        border-radius: 9999px;
        cursor: pointer;
        transition: opacity 0.2s, transform 0.1s;
        -webkit-tap-highlight-color: transparent;
      }

      button:hover {
        opacity: 0.85;
      }

      button:active {
        transform: scale(0.97);
      }

      @media (prefers-color-scheme: dark) {
        body {
          background-color: #121212;
          color: #f5f5f5;
        }

        button {
          background-color: #313131;
          color: #f5f5f5;
        }

        output {
          color: #f5f5f5;
        }
      }

      @media (prefers-color-scheme: light) {
        body {
          background-color: #fff;
          color: #000;
        }

        button {
          background-color: #000;
          color: #fff;
        }

        output {
          color: #000;
        }
      }

      @media (pointer: coarse) {
        button:focus {
          outline: none;
        }
      }
    </style>
  </head>
  <body>
    <main>
      <button id="listen-button" data-listening="false">We listen</button>
      <output id="timer" role="timer">00:00:00</output>
      <button id="judge-button">We don't judge</button>
    </main>

    <script type="module">
      document.addEventListener('DOMContentLoaded', () => {
        const listenBtn = document.querySelector('#listen-button');
        const judgeBtn = document.querySelector('#judge-button');
        const timerDisplay = document.querySelector('#timer');

        let seconds = 0;
        let intervalId = null;

        const formatTime = (seconds) => {
          const date = new Date(seconds * 1000);
          return new Intl.DateTimeFormat('en-US', {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false,
            timeZone: 'UTC',
          }).format(date);
        };

        const startTimer = () => {
          if (listenBtn.dataset.listening === 'true') return;

          listenBtn.dataset.listening = 'true';
          intervalId = setInterval(() => {
            seconds += 1;
            timerDisplay.textContent = formatTime(seconds);
          }, 1000);

          if (Math.random() < 0.25) {
            judgeBtn.textContent = 'We judge';
          }
        };

        const resetTimer = () => {
          clearInterval(intervalId);
          intervalId = null;
          seconds = 0;
          timerDisplay.textContent = '00:00:00';
          judgeBtn.textContent = "We don't judge";
          listenBtn.dataset.listening = 'false';
        };

        listenBtn.addEventListener('click', startTimer);
        judgeBtn.addEventListener('click', resetTimer);
      });
    </script>
  </body>
</html>
